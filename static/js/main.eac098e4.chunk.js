(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{113:function(t,e,n){},114:function(t,e,n){},115:function(t,e,n){},117:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(2),c=n.n(r),i=n(31),o=n.n(i),u=(n(113),n(7)),s=n(8),l=n(11),p=n(10),d=(n(114),n(32)),f=n(5),m=n(33),b=n(3),h=(n(115),n(1)),j=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).createLinkedText=a.createLinkedText.bind(Object(f.a)(a)),a.divRef=c.a.createRef(),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.createLinkedText()}},{key:"componentDidUpdate",value:function(){this.createLinkedText()}},{key:"createLinkedText",value:function(){var t=this;t.props.reportData.then((function(e){var n,a=Object(b.a)(e);try{var r=function(){var e=n.value,a=document.createElement("span");a.append(document.createTextNode(e.text)),a.className="nonselected",a.addEventListener("mouseenter",(function(n){var r;null!==e.focusArgs&&((r=t.props).setFocus.apply(r,Object(m.a)(e.focusArgs)),a.className="selected")}),!1),a.addEventListener("mouseleave",(function(e){t.props.setFocus(),a.className="nonselected"}),!1),t.divRef.current.appendChild(a)};for(a.s();!(n=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}}))}},{key:"render",value:function(){return Object(a.jsx)("div",{ref:this.divRef})}}]),n}(r.Component),v=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).createBubbleChart=a.createBubbleChart.bind(Object(f.a)(a)),a.setFocus=a.setFocus.bind(Object(f.a)(a)),a.emphasisObjects=new Set,a.defaulttimeRange=[1800,2009],a.timeRange=a.defaulttimeRange,a.emphasisObjects.add("United States"),a}return Object(s.a)(n,[{key:"setFocus",value:function(t,e){this.timeRange=null===t||void 0===t?this.defaulttimeRange:t,this.emphasisObjects=new Set(e)}},{key:"componentDidMount",value:function(){this.createBubbleChart()}},{key:"componentDidUpdate",value:function(){this.createBubbleChart()}},{key:"createBubbleChart",value:function(){var t=this,e=this.node,n=1e3,a=500,r=20,c=20,i=35,o=40,u=h.g([200,1e5],[o,n-c]),s=h.f([14,86],[500-i,r]),l=h.h([0,5e8],[0,n/24]),p=function(e){return t.emphasisObjects.has(e)?"red":"black"},f=h.i(e),m=h.i("#timeSlider");function b(t){f.selectAll("circle").data(j(t),(function(t){return t.name})).sort((function(t,e){return h.d(t.population,e.population)})).transition().duration(200).attr("cx",(function(t){return u(t.income)})).attr("cy",(function(t){return s(t.lifeExpectancy)})).attr("r",(function(t){return l(t.population)})).attr("fill",(function(t){return p(t.name)}))}function j(e){return t.dataset.map((function(t){return{name:t.name,region:t.region,income:v(t.income,e),population:v(t.population,e),lifeExpectancy:v(t.lifeExpectancy,e)}}))}function v(t,e){var n=h.c((function(t){return Object(d.a)(t,1)[0]})).left(t,e,0,t.length-1),a=t[n];if(e>a[0]||0===n)return a[1];var r=t[n-1],c=(e-a[0])/(r[0]-a[0]);return a[1]*(1-c)+r[1]*c}f.attr("height",500).attr("width",n),t.props.data_load.then((function(e){t.dataset=e,m.attr("min",t.timeRange[0]).attr("max",t.timeRange[1]).attr("value",t.timeRange[0]),f.append("g").attr("stroke","black").selectAll("circle").data(j(t.timeRange[0]),(function(t){return t.name})).join("circle").sort((function(t,e){return h.d(t.population,e.population)})).attr("cx",(function(t){return u(t.income)})).attr("cy",(function(t){return s(t.lifeExpectancy)})).attr("r",(function(t){return l(t.population)})).attr("fill",(function(t){return p(t.name)})).call((function(t){return t.append("title").text((function(t){return[t.name,t.region].join("\n")}))})),function(t){var e=function(t){return t.attr("transform","translate(0,".concat(a-i,")")).call(h.a(u).ticks(12.5,",")).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",n).attr("y",i-4).attr("fill","currentColor").attr("text-anchor","end").text("Income per capita (dollars) \u2192")}))},r=function(t){return t.attr("transform","translate(".concat(o,",0)")).call(h.b(s)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-o).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("\u2191 Life expectancy (years)")}))};t.append("g").attr("class","axis").call(e),t.append("g").attr("class","axis").call(r)}(f)})),m.on("change",(function(){b(this.value)})),setInterval((function(){var e=Number(m.property("value"));e>=t.timeRange[1]||e<t.timeRange[0]?(m.property("value",t.timeRange[0]),b(t.timeRange[0])):(m.property("value",e+1),b(e+1))}),200)}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",{id:"timeSlider",type:"range"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("svg",{ref:function(e){return t.node=e}}),Object(a.jsx)(j,{reportData:this.props.reportData,setFocus:this.setFocus})]})]})}}]),n}(r.Component),x=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(s.a)(n,[{key:"render",value:function(){var t=h.e("./nations.json"),e=h.e("./sample_text.json");return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"React D3.js Bubble chart"}),Object(a.jsx)(v,{data_load:t,reportData:e})]})}}]),n}(r.Component);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.eac098e4.chunk.js.map